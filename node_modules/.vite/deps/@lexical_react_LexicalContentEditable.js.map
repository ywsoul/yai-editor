{
  "version": 3,
  "sources": ["../../.pnpm/@lexical+react@0.22.0_react-dom@18.3.1_react@18.3.1__react@18.3.1_yjs@13.6.21/node_modules/@lexical/react/LexicalContentEditable.dev.mjs"],
  "sourcesContent": ["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';\nimport { useLayoutEffect, useEffect, forwardRef, useState, useCallback, useMemo } from 'react';\nimport { jsx, jsxs, Fragment } from 'react/jsx-runtime';\nimport { $canShowPlaceholderCurry } from '@lexical/text';\nimport { mergeRegister } from '@lexical/utils';\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nconst CAN_USE_DOM = typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined';\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n\n// This workaround is no longer necessary in React 19,\n// but we currently support React >=17.x\n// https://github.com/facebook/react/pull/26395\nconst useLayoutEffectImpl = CAN_USE_DOM ? useLayoutEffect : useEffect;\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n// Source: https://github.com/gregberge/react-merge-refs/blob/main/src/index.tsx\n\nfunction mergeRefs(...refs) {\n  return value => {\n    refs.forEach(ref => {\n      if (typeof ref === 'function') {\n        ref(value);\n      } else if (ref != null) {\n        ref.current = value;\n      }\n    });\n  };\n}\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nfunction ContentEditableElementImpl({\n  editor,\n  ariaActiveDescendant,\n  ariaAutoComplete,\n  ariaControls,\n  ariaDescribedBy,\n  ariaErrorMessage,\n  ariaExpanded,\n  ariaInvalid,\n  ariaLabel,\n  ariaLabelledBy,\n  ariaMultiline,\n  ariaOwns,\n  ariaRequired,\n  autoCapitalize,\n  className,\n  id,\n  role = 'textbox',\n  spellCheck = true,\n  style,\n  tabIndex,\n  'data-testid': testid,\n  ...rest\n}, ref) {\n  const [isEditable, setEditable] = useState(editor.isEditable());\n  const handleRef = useCallback(rootElement => {\n    // defaultView is required for a root element.\n    // In multi-window setups, the defaultView may not exist at certain points.\n    if (rootElement && rootElement.ownerDocument && rootElement.ownerDocument.defaultView) {\n      editor.setRootElement(rootElement);\n    } else {\n      editor.setRootElement(null);\n    }\n  }, [editor]);\n  const mergedRefs = useMemo(() => mergeRefs(ref, handleRef), [handleRef, ref]);\n  useLayoutEffectImpl(() => {\n    setEditable(editor.isEditable());\n    return editor.registerEditableListener(currentIsEditable => {\n      setEditable(currentIsEditable);\n    });\n  }, [editor]);\n  return /*#__PURE__*/jsx(\"div\", {\n    \"aria-activedescendant\": isEditable ? ariaActiveDescendant : undefined,\n    \"aria-autocomplete\": isEditable ? ariaAutoComplete : 'none',\n    \"aria-controls\": isEditable ? ariaControls : undefined,\n    \"aria-describedby\": ariaDescribedBy\n    // for compat, only override aria-errormessage if ariaErrorMessage is defined\n    ,\n    ...(ariaErrorMessage != null ? {\n      'aria-errormessage': ariaErrorMessage\n    } : {}),\n    \"aria-expanded\": isEditable && role === 'combobox' ? !!ariaExpanded : undefined\n    // for compat, only override aria-invalid if ariaInvalid is defined\n    ,\n    ...(ariaInvalid != null ? {\n      'aria-invalid': ariaInvalid\n    } : {}),\n    \"aria-label\": ariaLabel,\n    \"aria-labelledby\": ariaLabelledBy,\n    \"aria-multiline\": ariaMultiline,\n    \"aria-owns\": isEditable ? ariaOwns : undefined,\n    \"aria-readonly\": isEditable ? undefined : true,\n    \"aria-required\": ariaRequired,\n    autoCapitalize: autoCapitalize,\n    className: className,\n    contentEditable: isEditable,\n    \"data-testid\": testid,\n    id: id,\n    ref: mergedRefs,\n    role: isEditable ? role : undefined,\n    spellCheck: spellCheck,\n    style: style,\n    tabIndex: tabIndex,\n    ...rest\n  });\n}\nconst ContentEditableElement = /*#__PURE__*/forwardRef(ContentEditableElementImpl);\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nfunction canShowPlaceholderFromCurrentEditorState(editor) {\n  const currentCanShowPlaceholder = editor.getEditorState().read($canShowPlaceholderCurry(editor.isComposing()));\n  return currentCanShowPlaceholder;\n}\nfunction useCanShowPlaceholder(editor) {\n  const [canShowPlaceholder, setCanShowPlaceholder] = useState(() => canShowPlaceholderFromCurrentEditorState(editor));\n  useLayoutEffectImpl(() => {\n    function resetCanShowPlaceholder() {\n      const currentCanShowPlaceholder = canShowPlaceholderFromCurrentEditorState(editor);\n      setCanShowPlaceholder(currentCanShowPlaceholder);\n    }\n    resetCanShowPlaceholder();\n    return mergeRegister(editor.registerUpdateListener(() => {\n      resetCanShowPlaceholder();\n    }), editor.registerEditableListener(() => {\n      resetCanShowPlaceholder();\n    }));\n  }, [editor]);\n  return canShowPlaceholder;\n}\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nconst ContentEditable = /*#__PURE__*/forwardRef(ContentEditableImpl);\nfunction ContentEditableImpl(props, ref) {\n  const {\n    placeholder,\n    ...rest\n  } = props;\n  const [editor] = useLexicalComposerContext();\n  return /*#__PURE__*/jsxs(Fragment, {\n    children: [/*#__PURE__*/jsx(ContentEditableElement, {\n      editor: editor,\n      ...rest,\n      ref: ref\n    }), placeholder != null && /*#__PURE__*/jsx(Placeholder, {\n      editor: editor,\n      content: placeholder\n    })]\n  });\n}\nfunction Placeholder({\n  content,\n  editor\n}) {\n  const showPlaceholder = useCanShowPlaceholder(editor);\n  const [isEditable, setEditable] = useState(editor.isEditable());\n  useLayoutEffect(() => {\n    setEditable(editor.isEditable());\n    return editor.registerEditableListener(currentIsEditable => {\n      setEditable(currentIsEditable);\n    });\n  }, [editor]);\n  if (!showPlaceholder) {\n    return null;\n  }\n  let placeholder = null;\n  if (typeof content === 'function') {\n    placeholder = content(isEditable);\n  } else if (content !== null) {\n    placeholder = content;\n  }\n  if (placeholder === null) {\n    return null;\n  }\n  return /*#__PURE__*/jsx(\"div\", {\n    \"aria-hidden\": true,\n    children: placeholder\n  });\n}\n\nexport { ContentEditable };\n"],
  "mappings": "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",
  "names": []
}
